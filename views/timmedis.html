<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registrasi Tim Medis</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Edu+AU+VIC+WA+NT+Pre:wght@400..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/dist/styles.css">
</head>

<body>
  <!-- container -->
  <div class="min-h-screen bg-[url('https://cdn.cisdi.org/program/fnm-dokter%20anak-fnm.webp')] bg-center bg-cover px-28 py-5 relative">
    <div class="w-full max-w-md md:max-w-3xl p-6 md:p-10 bg-white rounded-lg shadow-lg mx-auto mt-10">
      
      <!-- Progress Indicator -->
      <div class="flex flex-col md:flex-row justify-between items-center mb-8 space-y-4 md:space-y-0">
        <div class="flex items-center">
          <div id="step1" class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-full bg-gray-800 text-white text-sm md:text-base">1</div>
          <span class="ml-2 text-gray-700 text-sm md:text-base">Data Diri</span>
        </div>
        <div class="flex items-center">
          <div id="step2" class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-full bg-gray-300 text-gray-500 text-sm md:text-base">2</div>
          <span class="ml-2 text-gray-700 text-sm md:text-base">Persyaratan</span>
        </div>
        <div class="flex items-center">
          <div id="step3" class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-full bg-gray-300 text-gray-500 text-sm md:text-base">3</div>
          <span class="ml-2 text-gray-700 text-sm md:text-base">Konfirmasi</span>
        </div>
      </div>

      <!-- Step Content -->
      <div id="stepContent1" class="step-content">
        <h2 class="text-lg md:text-2xl font-semibold mb-4">Data Diri</h2>
        <form id="formMultiStep" enctype="multipart/form-data">
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">Nama</label>
            <input name="nama" type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" placeholder="Nama" required />
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">Tempat Lahir</label>
            <input name="tempat_lahir" type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" placeholder="Tempat Lahir" required />
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">Tanggal Lahir</label>
            <input name="tanggal_lahir" type="date" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" required />
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">Gender</label>
            <select name="gender" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" required>
              <option value="L">Laki-laki</option>
              <option value="P">Perempuan</option>
            </select>
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">NIK</label>
            <input name="nik" type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" placeholder="NIK" required />
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 text-sm md:text-base">Telepon</label>
            <input name="telpon" type="tel" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-800" placeholder="Telepon" required />
          </div>
        </form>
      </div>

      <div id="stepContent2" class="step-content hidden">
        <h2 class="text-lg md:text-2xl font-semibold mb-4">Dokumen</h2>
        <div class="mb-4">
            <div class="space-y-2">
              <div class="flex items-center">
                <input type="checkbox" id="ijazah" name="ijazah" class="mr-2 leading-tight text-blue-400" />
                <label for="ijazah" class="text-sm text-gray-700">Fotokopi KTP</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="str" name="str" class="mr-2 leading-tight text-blue-400" />
                <label for="str" class="text-sm text-gray-700">Ijazah sesuai dengan peminatan</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="sip" name="sip" class="mr-2 leading-tight text-blue-400" />
                <label for="sip" class="text-sm text-gray-700">Surat Izin Praktik (SIP)</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="sertifikat_gawatdarurat" name="sertifikat_gawatdarurat" class="mr-2 leading-tight text-blue-400" />
                <label for="sertifikat_gawatdarurat" class="text-sm text-gray-700">Sertifikat atau pengalaman kegawatdaruratan (untuk dokter dan perawat)</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="sip_apoteker" name="sip_apoteker" class="mr-2 leading-tight text-blue-400" />
                <label for="sip_apoteker" class="text-sm text-gray-700">Surat izin praktik apoteker</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="surat_izin_pimpinan" name="surat_izin_pimpinan" class="mr-2 leading-tight text-blue-400" />
                <label for="surat_izin_pimpinan" class="text-sm text-gray-700">Surat izin dari pimpinan instansi (untuk PNS/TNI/POLRI)</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="rekomendasi_organisasi" name="rekomendasi_organisasi" class="mr-2 leading-tight text-blue-400" />
                <label for="rekomendasi_organisasi" class="text-sm text-gray-700">Rekomendasi dari organisasi profesi</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="pas_foto" name="pas_foto" class="mr-2 leading-tight text-blue-400" />
                <label for="pas_foto" class="text-sm text-gray-700">Surat Tanda Registrasi (STR)</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="fotokopi_ktp" name="fotokopi_ktp" class="mr-2 leading-tight text-blue-400" />
                <label for="fotokopi_ktp" class="text-sm text-gray-700">Pas foto 3x4</label>
              </div>
            </div>
          </div>          
      </div>

      <div id="stepContent3" class="step-content hidden">
        <h2 class="text-lg md:text-2xl font-semibold mb-4">Konfirmasi</h2>
        <p class="text-gray-700 text-lg font-semibold mb-4">
            Pendaftaran Anda Hampir Selesai!
          </p>
          <p class="text-gray-700 text-sm md:text-base mb-4">
            Sebelum melanjutkan, pastikan Anda telah memeriksa kembali semua informasi yang telah Anda masukkan. Setelah itu, klik tombol <span class="font-semibold">"Submit"</span> untuk menyelesaikan proses pendaftaran Anda.
          </p>
          <p class="text-red-500 text-sm md:text-base font-semibold">
            Penting: Formulir ini hanya dapat dikirimkan sekali, jadi pastikan semuanya sudah benar!
          </p>
          
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Simpan dalam format PDF</label>
          <input name="dokumen" type="file" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-300 focus:border-blue-300 outline-none transition-all" required />
        </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-6">
        <button id="prevButton" class="px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed transition duration-300" disabled>Previous</button>
        <button id="nextButton" class="px-4 py-2 bg-gray-800 text-white rounded transition duration-300 hover:bg-gray-800">Next</button>
      </div>
    </div>
  </div>

  <script>
    // JavaScript untuk mengelola langkah-langkah
const steps = ["step1", "step2", "step3"];
const stepContents = ["stepContent1", "stepContent2", "stepContent3"];
let currentStep = 0;

const prevButton = document.getElementById("prevButton");
const nextButton = document.getElementById("nextButton");
const formElement = document.getElementById("formMultiStep");

function updateStep() {
  // Perbarui indikator langkah
  steps.forEach((step, index) => {
    const stepElement = document.getElementById(step);
    stepElement.classList.toggle("bg-gray-800", index === currentStep);
    stepElement.classList.toggle("text-white", index === currentStep);
    stepElement.classList.toggle("bg-gray-300", index !== currentStep);
    stepElement.classList.toggle("text-gray-500", index !== currentStep);
  });

  // Tampilkan/Sembunyikan konten langkah
  stepContents.forEach((content, index) => {
    document.getElementById(content).classList.toggle("hidden", index !== currentStep);
  });

  // Perbarui status tombol
  prevButton.disabled = currentStep === 0;
  nextButton.textContent = currentStep === steps.length - 1 ? "Submit" : "Next";
}

prevButton.addEventListener("click", () => {
  if (currentStep > 0) currentStep--;
  updateStep();
});

nextButton.addEventListener("click", () => {
  if (currentStep < steps.length - 1) {
    currentStep++;
    updateStep();
  } else {
    // Validasi data sebelum submit
    if (formElement.reportValidity()) {
      const formData = new FormData(formElement);
      fetch('/timmedis', {
        method: 'POST',
        body: formData,
      })
      .then(response => {
        if (response.ok) {
          window.location.href = '/process';
        } else {
          alert('Gagal mengirim data. Pastikan semua data telah diisi dengan benar.');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('Terjadi kesalahan saat mengirim data.');
      });
    } else {
      alert('Mohon isi semua bidang yang wajib.');
    }
  }
});

// Inisialisasi langkah pertama
updateStep();
</script>